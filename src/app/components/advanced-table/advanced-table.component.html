<p-toolbar styleClass="mb-4 gap-2">
  <ng-template pTemplate="left"> </ng-template>
  <ng-template pTemplate="right">
    <span class="p-input-icon-left mb-2">
      <i class="fa-solid fa-magnifying-glass"></i>
      <input
        pInputText
        type="text"
        #filter
        (input)="this.onGlobalFilter.emit({ table: tableName, event: $event })"
        placeholder="{{ tableSearchBoxPlaceHolder }}"
        class="w-full" />
    </span>
  </ng-template>
</p-toolbar>

<p-table
  #tableName
  [value]="tableDatas"
  [rows]="10"
  [columns]="columns"
  [paginator]="true"
  [rowsPerPageOptions]="[5, 10, 20]"
  [globalFilterFields]="globalFilterFields"
  [rowHover]="false"
  dataKey="id"
  currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
  [showCurrentPageReport]="true">
  <ng-template pTemplate="header" let-columns>
    <tr>
      <th *ngFor="let column of columns" pSortableColumn="{{ column.field }}">
        <div class="flex justify-content-between align-items-center flex-wrap">
          <div class="flex align-items-center justify-content-center">
            <span>{{ column.header }}</span>
          </div>
          <div
            *ngIf="column.isFilterableAndSortable"
            class="flex align-items-center justify-content-center">
            <p-columnFilter
              type="text"
              field="{{ column.field }}"
              display="menu"
              placeholder="Search by {{ column.header }}"></p-columnFilter>
            <p-sortIcon field="{{ column.field }}" />
          </div>
        </div>
      </th>
    </tr>
  </ng-template>
  <ng-template pTemplate="body" let-rowData let-columns="columns">
    <tr>
      <td *ngFor="let col of columns">
        @if (!col.isSeverity && !col.isOperationColumn) {
          {{ rowData[col.field] }}
        } @else if (col.isOperationColumn) {
          <div class="flex justify-content-center flex-wrap">
            <p-button
              pRipple
              icon="fa-solid fa-pen-to-square"
              class="mr-2"
              [rounded]="true"
              [outlined]="true"
              severity="success"
              (click)="this.editRecord.emit({ tableData: tableData })" />
            <p-button
              pRipple
              icon="fa-solid fa-trash"
              severity="danger"
              [rounded]="true"
              [outlined]="true"
              (click)="this.deleteRecord.emit({ tableData: tableData })" />
          </div>
        } @else if (col.isSeverity) {
          <p-tag
            [value]="rowData[col.field]"
            [severity]="getSeverity(rowData[col.field])" />
        }
      </td>
    </tr>
  </ng-template>
  <ng-template pTemplate="summary">
    <div class="flex align-items-center justify-content-between">
      {{ tableSummaryInfo }}
    </div>
  </ng-template>
</p-table>

<p-confirmDialog
  #cd
  [style]="{ width: '450px' }"
  class="justify-content-center">
  <ng-template pTemplate="headless" let-message>
    <div
      class="flex flex-column align-items-center p-5 surface-overlay border-round">
      <div
        class="border-circle bg-primary inline-flex justify-content-center align-items-center h-6rem w-6rem">
        <i class="pi fa-solid fa-triangle-exclamation text-5xl"></i>
      </div>
      <span class="font-bold text-2xl block mb-2 mt-4">
        {{ message.header }}
      </span>
      <p class="mb-0">{{ message.message }}</p>
      <div class="flex justify-content-center flex-wrap gap-5 mt-4">
        <div
          class="flex align-items-center justify-content-center w-4rem h-4rem border-round m-2">
          <p-button label="Save" (click)="cd.accept()" class="w-8rem" />
        </div>
        <div
          class="flex align-items-center justify-content-center w-4rem h-4rem border-round m-2">
          <p-button label="Cancel" (click)="cd.reject()" class="w-8rem" />
        </div>
      </div>
    </div>
  </ng-template>
</p-confirmDialog>

<p-toast />
